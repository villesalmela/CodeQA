{% extends 'base.html' %}
{% block head %}{{ codemirror.include_codemirror() }}{% endblock %}
{% block title %}Code QA{% endblock %}
{% block body %}
<h1>Test your function</h1>
<nav class="trail">
    <ul>
        <li><a href="/add">Lint</a></li>
        <li><a href="/doc">Document</a></li>
        <li><strong>Test</strong></li>
        <li>Classify</li>
    </ul>
</nav>
<p>Click 'Generate Tests' to have OpenAI automatically generate a set of unit tests for your code.
    You can then review and modify the tests, before running them with 'Run Tests'
</p>
{% if form.errors %}
<ul class="errors">
    {% for field_name, field_errors in form.errors|dictsort if field_errors %}
    {% for error in field_errors %}
    <li>{{ form[field_name].label }}: {{ error }}</li>
    {% endfor %}
    {% endfor %}
</ul>
{% endif %}
<form method="POST" action="/test">
    {{ form.csrf_token }}
    <div>{{ form.documented.label }} <br> {{ form.documented }}</div>
    <div>{{ form.unittests.label }} <br> {{ form.unittests }}</div>
    {% if results %}
    <h2>Test results</h2>
    <pre>
        {{ results }}
    </pre>
    {% endif %}
    {{ form.generate }}
    {{ form.run }}
    {{ form.next }}
</form>
{% endblock %}